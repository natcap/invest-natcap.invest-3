{
    "id" : "window",
    "label": "Fisheries",
    "targetScript" : "invest_natcap.fisheries.fisheries",
    "modelName" : "fisheries",
    "localDocURI": "../documentation/habitat_risk_assessment.html",
    "height": 800,
    "width" : 700,
    "elements": [
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "../Fisheries",
                    "required": true,
                    "validateAs": {"type": "folder"},
                    "helpText": "Select a folder to be used as your workspace.  If the folder you select does not exist, it will be created for you.<br/><br/>This folder will contain the shapefiles and textfiles produced by this model.  <b>If datasets already exist in this folder, they will be overwritten</b>."
                },
                {
                    "id" : "aoi",
                    "args_id" : "aoi_uri",
                    "type": "file",
                    "label": "Area(s) of Interest",
                    "required": true,
                    "validateAs": {"type": "OGR",
                        "layers": [{"name": {"inheritFrom": "file"}}],
		    		    "mustExist": true,
                        "fieldsExist": ["NAME"]},
                    "helpText": "This is a shapefile which will be used to display outputs within the region or regions of interest. The layer should contain one feature for every region of interest, and each should have a 'name' attribute. The name can be numeric or alphabetic, but must be unique within the file."
                },
                {
                    "id" : "param_csv",
                    "args_id" : "class_params_uri",
                    "type": "file",
                    "label": "Parameters for Age Classes and Area(s)",
                    "required": true,
                    "helpText": "This CSV file should contain all necessary parameters for age classes and areas. These are the main parameters upon which the model should run. For help in determining what should go into your CSV, please see the documentation."
                },
                {
                    "id" : "maturity_type",
                    "args_id" : "maturity_type",
                    "type": "dropdown",
                    "label": "Maturity Type",
                    "required": true,
                    "options" : ["Age Specific", "Stage Specific"],
                    "returns": "strings",
                    "dataType": "string",
                    "helpText": "This dropdown specifies whether the classes being input within the parameters CSV is classified into maturity classes by age or stage. Age specific models (ex: lobster, Dungeness crab) are separated by age in years in uniform time steps. Stage specific models (ex: shrimp) can have variable length time steps. Should Stage Specific time steps be chosen, there should be a column in the parameters CSV titled 'Duration' which will contain the number of time steps that each stage will last."
                },
                {
                    "id" : "do_gender",
                    "args_id" : "is_gendered",
                    "type": "checkbox",
                    "label": "Classes Are Sex-Specific?",
                    "defaultValue": false,
                    "required": true,
                    "helpText": "This box indicates whether the age/stage classes provided are gender specific. Checking this box indicates that the population functions differently across gender lines, and spawning should be adjusted accordingly."
                },
                {
                    "id" : "harvest_type",
                    "args_id" : "hrv_type",
                    "type": "dropdown",
                    "label": "Biomass and Harvest by Weight or Numbers?",
                    "required": true,
                    "options" : ["Numbers", "Weight"],
                    "returns": "strings",
                    "dataType": "string",
                    "helpText": "This dropdown specifies whether the harvest numbers returned should be given in number of individuals harvested, or by the weight being harvested. If using the weight, there must be a corresponding 'weight' column in the CSV, with information about the weight of each maturity class."
                },
                {
                    "id" : "sim_dur",
                    "args_id" : "duration",
                    "type": "text",
                    "dataType": "int",
                    "label": "Duration of Simulation (time steps)",
                    "validateAs": {"type": "number"},
                    "required": true,
                    "helpText": "Number of time steps that the model should be run. Keep in mind that the model may be run for additional time steps if it has not yet equillibrated."
                } 
            ]
        },
        {
            "id": "p_cont",
            "label": "Recruitment Parameters",
            "type": "container",
            "elements":[
                {
                    "id": "params_list",
                    "type": "list",
                    "elements": [
                    {
                        "id" : "rec_eq",
                        "args_id" : "rec_eq",
                        "type": "dropdown",
                        "label": "Recruitment Equation",
                        "required": true,
                        "options" : ["Beverton-Holt", "Ricker", "Fecundity", "Fixed"],
                        "returns": "strings",
                        "dataType": "string",
                        "helpText": "This equation will be used in order to model recruitment within each of the zones provided in the AOI URI shapefile. Each will require a different set of parameters. Beverton-Holt requires alpha and beta. Ricker requires alpha and beta. Fecundity requires one fecundity parameter for each age/stage being provided (within the input CSV). For fecundity, upload a CSV which correlates offspring produced for each age. (See sample data example.) Fixed requires only a single parameter representing a single number of recruits which will be applied to each area."
                    },
                    {
                        "id" : "alpha",
                        "args_id" : "alpha",
                        "type": "text",
                        "dataType": "float",
                        "label": "Alpha (Beverton-Holt/Ricker)",
                        "required": false,
                        "validateAs": {"type": "number"},
                        "helpText": "This is a required parameter for both the Beverton-Holt and the Ricker equations for modeling recruitment. An alpha parameter should be entered here if you selected either of those two equations in the dropdown menu above."
                    },
                    {
                        "id" : "beta",
                        "args_id" : "beta",
                        "type": "text",
                        "dataType": "float",
                        "label": "Beta (Beverton-Holt/Ricker)",
                        "required": false,
                        "validateAs": {"type": "number"},
                        "helpText": "This is a required parameter for both the Beverton-Holt and the Ricker equations for modeling recruitment. An beta parameter should be entered here if you selected either of those two equations in the dropdown menu above."
                    },
                    {
                        "id" : "fec_csv",
                        "args_id" : "fec_params_uri",
                        "type": "file",
                        "label": "Offspring per Age Class (Fecundity)",
                        "required": false,
                        "helpText": "This CSV file is required if the chosen recruitment equation is 'Fecundity.' It should contain numbers of potential offspring for each age class being included in the main parameters CSV."
                    },
                    {
                        "id" : "fix_param",
                        "args_id" : "fix_param",
                        "type": "text",
                        "dataType": "float",
                        "label": "Number of Recruits (Fixed)",
                        "required": false,
                        "validateAs": {"type": "number"},
                        "helpText": "This parameter is required if the recruitment equation is 'Fixed'. This number representes a single number of recruits that will be brought into all areas at each time step."
                    }
                    ]
                }
            ]
        },
        {    
            "id" : "parameters_list",
            "type": "list",
            "elements":[
                {
                    "id" : "recruit_num",
                    "args_id" : "init_recruits",
                    "type": "text",
                    "dataType": "float",
                    "label": "Initial Number of Recruits",
                    "required": true,
                    "validateAs": {"type":"number"},
                    "helpText": "The initial number of recruits that will be placed into the model. If there are multiple AOI zones, this initial number will be split equally amongst them."
                }
            ]
        },
        {
            "id": "do_migration",
            "label": "Migration",
            "type": "container",
            "collapsible": true,
            "elements":[
                {
                    "id": "mig_list",
                    "type": "list",
                    "elements": [
                        {
                            "id" : "mig_csv",
                            "args_id" : "mig_params_uri",
                            "type": "folder",
                            "label": "Migration Matrix CSV Folder",
                            "required": false,
                            "validateAs": {"type": "folder"},
                            "helpText": "This folder should contain all CSV matrices for migration. There should be one CSV per age class, labeled accordingly. Each matrix should contain the portion of that age class which will move from one area to another."
                        }
                    ]
                }
             ]
        },
        {
            "id": "do_val",
            "label": "Valuation",
            "type": "container",
            "collapsible": true,
            "elements":[
                {
                    "id": "params_list",
                    "type": "list",
                    "elements": [
                        {
                            "id" : "f_post_proc",
                            "args_id" : "frac_post_process",
                            "type": "text",
                            "label": "Fraction After Processing",
                            "required": true,
                            "dataType": "float",
                            "validateAs": {"type":"number"},
                            "helpText": "This is the fraction of the meat left over from the animal after processing is complete."
                        },
                        {
                            "id" : "unit_price",
                            "args_id" : "unit_price",
                            "type": "text",
                            "label": "Unit Price",
                            "required": true,
                            "dataType": "float",
                            "validateAs": {"type": "number"},
                            "helpText": "Price for the desired measurable unit of the animal."
                        }
                    ]
                }
            ]
        }
    ]
}
