{
    "id" : "window",
    "label": "Carbon Storage and Sequestration",
    "targetScript" : "invest_natcap.carbon.carbon_biophysical",
    "modelName" : "carbon_biophysical",
    "localDocURI": "../documentation/carbonstorage.html",
    "height": 600,
    "width" : 700,
    "elements": [
        {
            "id" : "calc_sequestration",
            "type": "checkbox",
            "label": "Calculate sequestration",
            "defaultValue": false,
            "required": false
        },
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "../Carbon",
                    "required": true,
                    "helpText": "A directory that will contain the intermediate and output files for this run."
                },
                {
                    "id" : "results_suffix",
                    "args_id" : "suffix",
                    "type": "text",
                    "dataType": "string",
                    "validText": "[a-zA-Z0-9]*",
                    "label": "Results Suffix (optional)",
                    "defaultValue": "",
                    "returns": {"ifEmpty": "pass"},
                    "required": false,
                    "helpText":"This text will be appended to the end of the output files to help separate multiple runs."
                }
            ]
        },
        {
            "id" : "cur_lulc_box",
            "type": "container",
            "collapsible" : false,
            "label": "Current land use/land cover",
            "elements": [
                {
                    "id" : "cur_lulc_list",
                    "type" : "list",
                    "elements":[
                        {
                           "id" : "cur_lulc_raster",
                            "args_id" : "lulc_cur_uri",
                            "type": "file",
                            "label": "Raster location",
                            "defaultValue": "../Base_Data/Terrestrial/lulc_samp_cur/hdr.adf",
                            "required": true,
                            "validateAs": {"type": "GDAL"},
                            "helpText": "Location of the landcover map for the current scenario."
                        },
                        {
                            "id" : "cur_lulc_year",
                            "type": "text",
                            "width": 70,
                            "validText": "-?[0-9]+",
                            "dataType": "int",
                            "args_id": "lulc_cur_year",
                            "label": "Year of land cover",
                            "required": false,
                            "enabledBy": "calc_sequestration",
                            "defaultValue": "2000",
                            "requiredIf": ["cur_harvest_map", "fut_harvest_map"],
                            "helpText": "The calendar year of the current scenario."
                        }
                    ]
                }
            ]
        },
        {
            "id" : "fut_lulc_box",
            "type": "container",
            "collapsible": false,
            "label": "Future land use/land cover",
            "elements": [
                {
                    "id" : "fut_lulc_list",
                    "type" : "list",
                    "elements" : [
                        {
                            "id" : "fut_lulc_raster",
                            "type": "file",
                            "label": "Raster location",
                            "args_id": "lulc_fut_uri",
                            "required": false,
                            "enabledBy": "calc_sequestration",
                            "defaultValue": "../Base_Data/Terrestrial/lulc_samp_fut/hdr.adf",
                            "requiredIf": ["calc_sequestration"],
                            "validateAs": {"type": "GDAL"},
                            "helpText": "Location of the landcover map for the current scenario."
                        },
                        {
                            "id" : "fut_lulc_year",
                            "type": "text",
                            "width": 70,
                            "validText": "-?[0-9]+",
                            "dataType": "int",
                            "label": "Year of land cover",
                            "args_id": "lulc_fut_year",
                            "required": false,
                            "defaultValue": "2030",
                            "enabledBy": "calc_sequestration",
                            "requiredIf": ["fut_harvest_map"],
                            "helpText": "The calendar year of the future scenario."
                        }
                    ]
                }
            ]
        },
        {
            "id" : "file_list",
            "type" : "list",
            "elements" : [
                {
                    "id" : "carbon_pools",
                    "type": "file",
                    "label": "Carbon pools",
                    "defaultValue": "../Carbon/Input/carbon_pools_samp.csv",
                    "args_id": "carbon_pools_uri",
                    "required": true,
                    "disabledBy": "uncertain_carbon_pool_container",
                    "validateAs": {"type": "table",
                                   "fieldsExist": ["LULC", "C_above", "C_Below", "C_Soil", "C_Dead"]},
                    "helpText": "A table that maps the land cover ids to carbon pools.  The table must contain columns of 'LULC', 'C_above', 'C_Below', 'C_Soil', 'C_Dead' as described in the user's guide.  The values in LULC must at least include the LULC ids in the land cover maps."
                },
                {
                    "id" : "cur_harvest_map",
                    "type": "file",
                    "label": "Current harvest rate map",
                    "args_id": "hwp_cur_shape_uri",
                    "required": false,
                    "defaultValue": "../Carbon/Input/harv_samp_cur.shp",
                    "enabledBy": "calc_sequestration",
                    "validateAs": {"type": "OGR",
                                   "layers": [{"name": {"inheritFrom": "filename"}, "type": "polygons"}],
                                   "fieldsExist": ["Cut_cur", "Start_date", "Freq_cur", "Decay_cur", "C_den_cur", "BCEF_cur"]},
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "A shapefile to indicate harvested wood products for the current scenario.  The field is optional.  If supplied the shapefile must have the fields 'Cut_cur', 'Start_date', 'Freq_cur', 'Decay_cur', 'C_den_cur', 'BCEF_cur'."
                },
                {
                    "id" : "fut_harvest_map",
                    "type": "file",
                    "label": "Future harvest rate map",
                    "args_id": "hwp_fut_shape_uri",
                    "required": false,
                    "defaultValue": "../Carbon/Input/harv_samp_fut.shp",
                    "enabledBy": "calc_sequestration",
                    "validateAs": {"type": "OGR",
                                   "layers": [{"name": {"inheritFrom": "filename"}, "type": "polygons"}],
                                   "fieldsExist": ["Cut_fut", "Freq_fut", "Decay_fut", "C_den_fut", "BCEF_fut"]},
                  "returns": {"ifEmpty": "pass"},
                  "helpText": "A shapefile to indicate harvested wood products for the future scenario.  The field is optional.  If supplied the shapefile must have the fields 'Cut_cur', 'Start_date', 'Freq_cur', 'Decay_cur', 'C_den_cur', 'BCEF_cur'."
                }
            ]
        },
        {
            "id": "uncertain_carbon_pool_container",
            "type": "container",
            "collapsible": true,
            "args_id": "use_uncertainty",
            "label": "Data for uncertainty analysis (enable to trigger uncertainty analysis)",
            "elements": [
                {
                    "id": "uncertainty_list",
                    "type": "list",
                    "elements": [
                    {
                        "id" : "carbon_pools_uncertain",
                        "type": "file",
                        "label": "Carbon pools",
                        "defaultValue": "../Carbon/Input/carbon_pools_samp_uncertain.csv",
                        "args_id": "carbon_pools_uncertain_uri",
                        "required": true,
                        "validateAs": {"type": "table",
                                       "fieldsExist": ["LULC", 
                                                       "C_above_mean", "C_above_sd",
                                                       "C_below_mean", "C_below_sd",
                                                       "C_soil_mean", "C_soil_sd",
                                                       "C_dead_mean", "C_dead_sd"]},
                        "helpText": "A table that maps the land cover ids to probability distributions for carbon pools. Each probability distribution must be specified by a mean and a standard deviation. The table must contain columns of 'LULC', 'C_above_mean', 'C_above_sd', 'C_below_mean', 'C_below_sd', 'C_soil_mean', 'C_soil_sd', 'C_dead_mean', and 'C_dead_sd' as described in the user's guide.  The values in LULC must at least include the LULC ids in the land cover maps."
                      },
                      {
                          "id": "confidence_threshold",
                          "type": "text",
                          "width": 50,
                          "validText": "[0-9][0-9]([.][0-9]*)?",
                          "defaultValue": "90",
                          "dataType": "int",
                          "args_id": "confidence_threshold",
                          "label": "Confidence threshold",
                          "requiredIf": ["carbon_pools_uncertain"],
                          "helpText": "The percent confidence that should be used as a minimum threshold for highlighting areas of confidence in the output data."
                      }
                      ]
                }
            ]
        }
    ]
}
