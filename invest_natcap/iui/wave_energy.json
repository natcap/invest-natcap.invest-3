{
    "id" : "window",
    "label": "Wave Energy",
    "targetScript" : "invest_natcap.wave_energy.wave_energy",
    "modelName" : "wave_energy",
    "localDocURI": "../documentation/wave_energy.html",
    "height": 800,
    "width" : 800,
    "elements": [
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "../WaveEnergy",
                    "required": true,
                    "validateAs": {"type": "folder"},
                    "helpText": "Select a folder to be used as your workspace.  If the folder you select does not exist, it will be created for you.<br/><br/>This folder will contain the rasters produced by this model.  <b>If datasets already exist in this folder, they will be overwritten</b>."
                },
				{
                    "id" : "wave_base_data",
                    "args_id" : "wave_base_data_uri",
                    "type": "folder",
                    "label": "Path to Folder with Wave Base Data",
                    "defaultValue": "../WaveEnergy/input/WaveData",
                    "required": true,
                    "validateAs": {"type": "folder", "mustExist": true},
                    "helpText": "Select the folder that has the packaged Wave Energy Data."
                },
		        {
		            "id": "analysis_area",
		            "args_id": "analysis_area_uri",
		            "type": "dropdown",
		            "label": "Analysis Area",
		            "options": ["West Coast of North America and Hawaii",
		            		    "East Coast of North America and Puerto Rico",
                                "North Sea 4 meter resolution",
                                "North Sea 10 meter resolution",
                                "Australia",
					            "Global"],
		            "defaultValue": 0,
		            "required": true,
                    "helpText": "A list of analysis areas the model can currently be run on. All the wave energy data needed for these areas are pre-packaged in the WaveData folder."
		        },
                {
                    "id" : "aoi",
                    "args_id": "aoi_uri",
                    "type": "file",
                    "label": "Area of Interest (AOI)",
                    "defaultValue": "../WaveEnergy/input/AOI_WCVI.shp",
                    "required": false,
                    "validateAs": {"type": "OGR",
                    			   "layers": [{"name": {"inheritFrom": "file"},
                    			               "type": "polygons",
                    			               "projection" : {"units": "meters", "exists":true},
                    			               "datum" : "WGS_1984"}]
                    			   },
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "An OGR polygon shapefile that defines an area of interest. This input is required for computing valuation and is recommended for biophysical runs as well. The AOI should be projected in linear units of meters."
                },
        		{
                    "id" : "machine_perf_table",
                    "args_id": "machine_perf_uri",
                    "type": "file",
                    "label": "Machine Performance Table",
                    "defaultValue": "../WaveEnergy/input/Machine_Pelamis_Performance.csv",
                    "required": true,
                    "validateAs": {"type":"CSV"},
                    "helpText": "A Comma Separated Value table that has the performance of a particular wave energy machine at certain sea state conditions."
                },
                {
                    "id" : "machine_param_table",
                    "args_id": "machine_param_uri",
                    "type": "file",
                    "label": "Machine Parameter Table",
                    "required": true,
                    "defaultValue": "../WaveEnergy/input/Machine_Pelamis_Parameter.csv",
                	"validateAs": { "type": "CSV",
                					"fieldsExist": ["NAME", "VALUE", "NOTE"],
                					"restrictions": [{"field": "NAME",
                									"validateAs":{"type": "string",
                									              "allowedValues": {"pattern":"capmax|hsmax|tpmax",
                									                                "flag":"ignoreCase"}
                									              }},
                									 {"field": "VALUE",
                									  "validateAs": {"type": "number",
                									                 "allowedValues":{"pattern":"[0-9]*\\.?[0-9]+$"}
                									                 }}]},
                    "helpText": "A Comma Separated Value table that has parameter values for a wave energy machine. This includes information on the maximum capacity of the device and the upper limits for wave height and period."
                },
                {
                    "id" : "dem",
                    "args_id": "dem_uri",
                    "type": "file",
                    "label": "Global Digital Elevation Model (DEM)",
                    "defaultValue": "../Base_Data/Marine/DEMs/global_dem",
                    "required": true,
                    "validateAs": {"type": "GDAL"},
                    "helpText": "A GDAL dataset that has elevation values in meters. Used to get the cable distance for wave energy transmission."
                },
                {
                    "id" : "results_suffix",
                    "args_id" : "suffix",
                    "type": "text",
                    "label": "Results Suffix (optional)",
                    "defaultValue": "",
                    "returns": {"ifEmpty": "pass"},
                    "required": false,
                    "helpText":"A String that will be added to the end of the output file paths."
                }
              ]
            },
            {
                "id" : "valuation_container",
                "args_id" : "valuation_container",
                "type" : "container",
                "label" : "Valuation",
                "collapsible" : true,
                "defaultValue" : false,
                "enabledBy": "aoi",
                "elements" : [
                    {
                        "id" : "valuation_list",
                        "type" : "list",
                        "elements" : [
                            {
                                "id" : "land_grid_points",
                                "args_id" : "land_gridPts_uri",
                                "type": "file",
                                "label": "Grid Connection Points",
                                "defaultValue": "../WaveEnergy/input/LandGridPts_WCVI.csv",
                                "required": true,
                                "validateAs": { "type": "CSV",
                                                "fieldsExist": ["ID", "TYPE", "LAT", "LONG", "LOCATION"],
                                                "restrictions": [{"field": "ID",
                                                                "validateAs": {"type": "number",
                                                                               "allowedValues": {"pattern":"[0-9]+"}}},
                                                                {"field": "TYPE",
                                                                "validateAs": {"type": "string",
                                                                "allowedValues":{"pattern":"LAND|GRID", "flag":"ignoreCase"}}},
                                                                {"field": "LAT",
                                                                "validateAs": {"type": "number",
                                                                "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}},
                                                                {"field": "LONG",
                                                                "validateAs": {"type": "number",
                                                                "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}}
                                                    ]},
                                "helpText": "A Comma Separated Value table that has the landing points and grid points locations for computing cable distances."

                            },
                            {
                                "id": "machine_econ_table",
                                "args_id": "machine_econ_uri",
                                "type": "file",
                                "label": "Machine Economic Table",
                                "defaultValue": "../WaveEnergy/input/Machine_Pelamis_Economic.csv",
                                "required": true,
                                "validateAs": { "type": "CSV",
                                                "fieldsExist": ["NAME", "VALUE", "NOTE"],
                                                "restrictions": [{"field": "NAME",
                                                                "validateAs": {"type": "string",
                                                                               "allowedValues": {"pattern":"capmax|cc|cml|cul|col|omc|p|r|smlpm",
                                                                                                 "flag": "ignoreCase"}}},
                                                                {"field": "VALUE",
                                                                "validateAs": {"type": "number",
                                                                "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}}}
                                                    ]},
                                "helpText": "A Comma Separated Value table that has the economic parameters for the wave energy machine."

                            },
                            {
                                "id" : "number_of_machines",
                                "args_id": "number_of_machines",
                                "type": "text",
                                "label": "Number Of Machines",
                                "defaultValue": "28",
                                "required": true,
                                "validText": "[0-9]+",
                                "helpText": "An integer for how many wave energy machines will be in the wave farm."
                            }
                        ]
                    }
                   ]
            }
    ]
}
