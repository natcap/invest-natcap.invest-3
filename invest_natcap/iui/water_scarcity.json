{
    "id" : "window",
    "label": "Water Scarcity",
    "targetScript" : "invest_natcap.hydropower.water_scarcity",
    "modelName" : "water_scarcity",
    "localDocURI": "../documentation/water_scarcity.html",
    "height": 500,
    "width" : 700,
    "elements": [
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "../Hydropower",
                    "required": true
                },          
                {        
                    "id" : "water_yield_vol",
                    "args_id" : "water_yield_vol_uri",
                    "type": "file",
                    "label": "Water Yield (volume)",
                    "defaultValue": "../Hydropower/Service/wyield_vol.tif",
                    "required": true,
                    "validateAs": {"type": "GDAL"}
                },
                {        
                    "id" : "water_yield_mn",
                    "args_id" : "water_yield_mean_uri",
                    "type": "file",
                    "label": "Water Yield (mean)",
                    "defaultValue": "../Hydropower/Service/wyield_mn.tif",
                    "required": true,
                    "validateAs": {"type": "GDAL"}
                },
                {        
                    "id" : "land_use",
                    "args_id" : "lulc_uri",
                    "type": "file",
                    "label": "Land Use",
                    "defaultValue": "../Base_Data/Freshwater/landuse_90",
                    "required": true,
                    "validateAs": {"type": "GDAL"}
                },       
                {
                    "id" : "watersheds",
                    "args_id": "watersheds_uri",
                    "type": "file",
                    "label": "Watersheds",
                    "defaultValue": "../Base_Data/Freshwater/watersheds.shp",
                    "required": true,
                    "validateAs": {"type": "OGR", 
                                   "layers": [{"name": {"inheritFrom": "file"}, 
                                               "type": "polygons"
                                             }],
                                   "fieldsExist": ["ws_id"]
                                   }
                 },
                 {
                    "id" : "sub_watersheds",
                    "args_id": "sub_watersheds_uri",
                    "type": "file",
                    "label": "Sub-Watersheds",
                    "defaultValue": "../Base_Data/Freshwater/subwatersheds.shp",
                    "required": true,
                    "validateAs": {"type": "OGR", 
                                   "layers": [{"name": {"inheritFrom": "file"}, 
                                               "type": "polygons"
                                             }],
                                   "fieldsExist": ["subws_id"]
                                   }
                 },
                 {
                    "id" : "watershed_yield_table",
                    "args_id": "watershed_yield_table_uri",
                    "type": "file",
                    "label": "Watershed Yield Table",
                    "defaultValue": "../Hydropower/Output/watershed_yield_table.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["ws_id", "precip_mn", "PET_mn", "AET_mn", "wyield_mn", "wyield_sum"],
                                    "restrictions": [{"field": "ws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+"}
                                                                  }},
                                                     {"field": "precip_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "PET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "AET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "wyield_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "wyield_sum",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }}]}
                 },
                 {
                    "id" : "subwatershed_yield_table",
                    "args_id": "subwatershed_yield_table_uri",
                    "type": "file",
                    "label": "Sub-Watershed Yield Table",
                    "defaultValue": "../Hydropower/Output/subwatershed_yield_table.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["ws_id", "subws_id", "precip_mn", "PET_mn", "AET_mn", "wyield_mn", "wyield_sum"],
                                    "restrictions": [{"field": "ws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+"}
                                                                  }},
                                                    {"field": "subws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+"}
                                                                  }},
                                                     {"field": "precip_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "PET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "AET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "wyield_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "wyield_sum",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+$"}
                                                                  }}]}
                 },
                 {
                    "id" : "demand_table",
                    "args_id": "demand_table_uri",
                    "type": "file",
                    "label": "Water Demand Table",
                    "defaultValue": "../Hydropower/input/water_demand_table.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["lucode", "demand"],
                                    "restrictions": [{"field": "lucode",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+"}
                                                                  }},
                                                    {"field": "demand",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+"}
                                                                  }}]}
                 },   
                 {
                    "id" : "hydropower_calibration_table",
                    "args_id": "hydro_calibration_table_uri",
                    "type": "file",
                    "label": "Hydropower Calibration Table",
                    "defaultValue": "../Hydropower/input/hydropower_calibration_table.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["ws_id", "calib"],
                                    "restrictions": [{"field": "ws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+"}
                                                                  }},
                                                    {"field": "calib",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[0-9]*\\.?[0-9]+$"}
                                                                  }}]}
                 },
                 {        
                    "id" : "results_suffix",
                    "args_id" : "results_suffix",
                    "type": "text",
                    "dataType": "string",
                    "validText": "[a-zA-Z0-9]*",
                    "label": "Results Suffix (optional)",
                    "defaultValue": "",
                    "required": false
                }                         
            ]
        }
    ]
}
