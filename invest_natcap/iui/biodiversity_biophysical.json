{
    "id" : "window",
    "label": "Biodiversity: Biophysical",
    "targetScript" : "invest_natcap.biodiversity.biodiversity_biophysical",
    "modelName" : "biodiversity_biophysical",
    "localDocURI": "../documentation/biodiversity.html",
    "height": 500,
    "width" : 700,
    "elements": [
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "Biodiversity",
                    "required": true,
                    "validateAs": {"type": "folder"},
                    "helpText": "Select a folder to be used as your workspace.  If the folder you select does not exist, it will be created for you.<br/><br/>This folder will contain the rasters produced by this model.  <b>If datasets already exist in this folder, they will be overwritten</b>."
                },
                {        
                    "id" : "current_landcover",
                    "args_id" : "landuse_cur_uri",
                    "type": "file",
                    "label": "Current land cover map",
                    "defaultValue": "../Biodiversity/Input/lc_samp_cur_b/w001001.adf",
                    "required": true,
                    "validateAs": {"type": "GDAL"},
                    "helpText": "This must be a raster dataset that GDAL can
                    open. Each cell should represent a LULC code as an Integer.
                    The dataset should be in a projection where the units are
                    in meters and the projection used should be defined. The
                    LULC codes must match the codes in the Sensitivity table"
                },
                {        
                    "id" : "future_landcover",
                    "args_id" : "landuse_fut_uri",
                    "type": "file",
                    "label": "Future land cover map (optional)",
                    "required": false,
                    "validateAs": {"type": "GDAL"},
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "This input is optional but if provided must be
                    a raster dataset that GDAL can open. Each cell should 
                    represent a LULC code as an Integer.
                    The dataset should be in a projection where the units are
                    in meters and the projection used should be defined. The
                    LULC codes must match the codes in the Sensitivity table"
                },
                {        
                    "id" : "baseline_landcover",
                    "args_id" : "landuse_bas_uri",
                    "type": "file",
                    "label": "Baseline land cover map (optional)",
                    "defaultValue": "../Biodiversity/Input/lc_samp_bse_b/w001001.adf",
                    "required": false,
                    "validateAs": {"type": "GDAL"},
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "This input is optional but if provided must be
                    a raster dataset that GDAL can open. Each cell should 
                    represent a LULC code as an Integer.
                    The dataset should be in a projection where the units are
                    in meters and the projection used should be defined. The
                    LULC codes must match the codes in the Sensitivity table.
                    If possible the baseline map should refer to a time when
                    intensive management of the landscape was relatively rare."
                },       
                {
                    "id" : "threats_data",
                    "args_id": "threats_uri",
                    "type": "file",
                    "label": "Threats data",
                    "defaultValue": "../Biodiversity/Input/threats_samp.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["threat", "max_dist", "weight", "decay"],
                                    "restrictions": [{"field": "threat",
                                                    "validateAs":{"type": "string",
                                                                  "allowedValues": {"pattern":"[a-zA-Z_].*"}
                                                                  }},
                                                     {"field": "max_dist",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"^[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "weight",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"^[0]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "decay",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[01]"}
                                                                  }}]},
                    "helpText":"A CSV table of all the threats for the model to
                    consider. Each row in the table is a degradation source and
                    each column contains a different attribute of each
                    degradation source (THREAT, MAX_DIST, WEIGHT, DECAY). See
                    the user's guide for valid values for these columns."
                },
                {
                    "id" : "accessibility_threats",
                    "args_id": "access_uri",
                    "type": "file",
                    "label": "Accessibility to threats (optional)",
                    "defaultValue": "../Biodiversity/Input/access_samp.shp",
                    "required": false,
                    "validateAs": {"type": "OGR", 
                                   "layers": [{"name": {"inheritFrom": "file"}, 
                                               "type": "polygons"
                                             }],
                                   "fieldsExist": ["Access"]
                                   },
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "This must be a polygon shapefile that OGR can
                    open. The input contains data on the relative protection
                    that legal / institutional / social / physical barriers
                    provide against threats. Should contain polygons with
                    values ranging from 0 - 1 where 1 is fully accessible. Any
                    cells not covered by a polygon will be set to 1."
                },
                {
                    "id" : "sensitivity_data",
                    "args_id": "sensitivity_uri",
                    "type": "file",
                    "label": "Sensitivity of land cover types to each threat",
                    "defaultValue": "../Biodiversity/Input/sensitivity_samp.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["LULC", "NAME", "HABITAT"],
                                    "restrictions": [{"field": "LULC",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9].*"}
                                                                  }},
                                                     {"field": "NAME",
                                                      "validateAs": {"type": "string"}
                                                                  },
                                                     {"field": "HABITAT",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"^[0-9]*\\.?[0-9]+$"}
                                                                  }}]},
                    "helpText":"A CSV file containing information on the
                    sensitivity of LULC types to a given threat. Each row
                    should be a different LULC type that matches those from the
                    input landcover maps. See the users guide for information
                    on the columns and what values can be represented."
                },
                {
                    "id" : "half_saturation_constant",
                    "args_id" : "half_saturation_constant",
                    "type": "text",
                    "dataType": "int",
                    "validText": "^[0-9].*",
                    "label": "Half-saturation constant",
                    "defaultValue": "30",
                    "required": true,
                    "helpText":"An integer value. See user's guide for setting
                    this constant properly."
                },                         
                {
                    "id" : "results_suffix",
                    "args_id" : "results_suffix",
                    "type": "text",
                    "dataType": "string",
                    "validText": "[a-zA-Z0-9]*",
                    "label": "Results Suffix (optional)",
                    "defaultValue": "",
                    "required": false,
                    "helpText":"A string that will be added onto the end of the
                    output uris."
                }                         
            ]
        }
    ]
}
