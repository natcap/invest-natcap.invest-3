{
    "id" : "window",
    "label": "Biodiversity: Biophysical",
    "targetScript" : "invest_natcap.biodiversity.biodiversity_biophysical",
    "modelName" : "biodiversity_biophysical",
    "localDocURI": "../documentation/biodiversity.html",
    "height": 500,
    "width" : 700,
    "elements": [
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "Biodiversity",
                    "required": true,
                    "validateAs": {"type": "folder"},
                    "helpText": "Select a folder to be used as your workspace.  If the folder you select does not exist, it will be created for you.<br/><br/>This folder will contain the rasters produced by this model.  <b>If datasets already exist in this folder, they will be overwritten</b>."
                },
                {        
                    "id" : "current_landcover",
                    "args_id" : "landuse_cur_uri",
                    "type": "file",
                    "label": "Current land cover map",
                    "defaultValue": "../Biodiversity/Input/lc_samp_cur_b/w001001.adf",
                    "required": true,
                    "validateAs": {"type": "GDAL"},
                    "helpText": "This must be a raster dataset that GDAL can open."
                },
                {        
                    "id" : "future_landcover",
                    "args_id" : "landuse_fut_uri",
                    "type": "file",
                    "label": "Future land cover map (optional)",
                    "required": false,
                    "validateAs": {"type": "GDAL"},
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "This must be a raster dataset that GDAL can open."
                },
                {        
                    "id" : "baseline_landcover",
                    "args_id" : "landuse_bas_uri",
                    "type": "file",
                    "label": "Baseline land cover map (optional)",
                    "defaultValue": "../Biodiversity/Input/lc_samp_bse_b/w001001.adf",
                    "required": false,
                    "validateAs": {"type": "GDAL"},
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "This must be a raster dataset that GDAL can open."
                },       
                {
                    "id" : "threats_data",
                    "args_id": "threats_uri",
                    "type": "file",
                    "label": "Threats data",
                    "defaultValue": "../Biodiversity/Input/threats_samp.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["threat", "max_dist", "weight", "decay"],
                                    "restrictions": [{"field": "threat",
                                                    "validateAs":{"type": "string",
                                                                  "allowedValues": {"pattern":"[a-zA-Z_].*"}
                                                                  }},
                                                     {"field": "max_dist",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"^[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "weight",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"^[0-9]*\\.?[0-9]+$"}
                                                                  }},
                                                     {"field": "decay",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[01]"}
                                                                  }}]}
                },
                {
                    "id" : "accessibility_threats",
                    "args_id": "access_uri",
                    "type": "file",
                    "label": "Accessibility to threats (optional)",
                    "defaultValue": "../Biodiversity/Input/access_samp.shp",
                    "required": false,
                    "validateAs": {"type": "OGR", 
                                   "layers": [{"name": {"inheritFrom": "file"}, 
                                               "type": "polygons"
                                             }],
                                   "fieldsExist": ["Access"]
                                   },
                    "returns": {"ifEmpty": "pass"},
                    "helpText": "This must be a polygon shapefile that OGR can open."
                },
                {
                    "id" : "sensitivity_data",
                    "args_id": "sensitivity_uri",
                    "type": "file",
                    "label": "Sensitivity of land cover types to each threat",
                    "defaultValue": "../Biodiversity/Input/sensitivity_samp.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["LULC", "NAME", "HABITAT"],
                                    "restrictions": [{"field": "LULC",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9].*"}
                                                                  }},
                                                     {"field": "NAME",
                                                      "validateAs": {"type": "string"}
                                                                  },
                                                     {"field": "HABITAT",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"^[0-9]*\\.?[0-9]+$"}
                                                                  }}]}
                },
                {
                    "id" : "half_saturation_constant",
                    "args_id" : "half_saturation_constant",
                    "type": "text",
                    "dataType": "int",
                    "validText": "^[0-9].*",
                    "label": "Half-saturation constant",
                    "defaultValue": "30",
                    "required": true
                },                         
                {
                    "id" : "results_suffix",
                    "args_id" : "results_suffix",
                    "type": "text",
                    "dataType": "string",
                    "validText": "[a-zA-Z0-9]*",
                    "label": "Results Suffix (optional)",
                    "defaultValue": "",
                    "required": false
                }                         
            ]
        }
    ]
}
