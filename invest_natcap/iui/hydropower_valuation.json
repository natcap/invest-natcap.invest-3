{
    "id" : "window",
    "label": "Hydropower Valuation",
    "targetScript" : "invest_natcap.hydropower.hydropower_valuation",
    "modelName" : "hydropower_valuation",
    "localDocURI": "../documentation/reservoirhydropowerproduction.html",
    "height": 500,
    "width" : 700,
    "elements": [
        {
            "id" : "workspace_list",
            "type": "list",
            "elements":[
                {
                    "id" : "workspace",
                    "args_id" : "workspace_dir",
                    "type": "folder",
                    "label": "Workspace",
                    "defaultValue": "../Hydropower",
                    "required": true
                },          
                {        
                    "id" : "calibrated_water_yield_vol",
                    "args_id" : "cyield_uri",
                    "type": "file",
                    "label": "Calibrated Water Yield (volume)",
                    "defaultValue": "../Hydropower/Output/cyield_vol.tif",
                    "required": true,
                    "validateAs": {"type": "GDAL"}
                },
                {        
                    "id" : "water_consumption",
                    "args_id" : "consump_uri",
                    "type": "file",
                    "label": "Water Consumption (volume)",
                    "defaultValue": "../Hydropower/Output/consum_vol.tif",
                    "required": true,
                    "validateAs": {"type": "GDAL"}
                },       
                {
                    "id" : "watersheds",
                    "args_id": "watersheds_uri",
                    "type": "file",
                    "label": "Watersheds",
                    "defaultValue": "../Base_Data/Freshwater/watersheds.shp",
                    "required": true,
                    "validateAs": {"type": "OGR", 
                                   "layers": [{"name": {"inheritFrom": "file"}, 
                                               "type": "polygons",
					       "projection": {"exists": true}
                                             }],
                                   "fieldsExist": ["ws_id"]
                                   }
                 },
                 {
                    "id" : "sub_watersheds",
                    "args_id": "sub_watersheds_uri",
                    "type": "file",
                    "label": "Sub-Watersheds",
                    "defaultValue": "../Base_Data/Freshwater/subwatersheds.shp",
                    "required": true,
                    "validateAs": {"type": "OGR", 
                                   "layers": [{"name": {"inheritFrom": "file"}, 
                                               "type": "polygons",
					       "projection": {"exists": true}
                                             }],
                                   "fieldsExist": ["subws_id"]
                                   }
                 },
                 {
                    "id" : "watershed_scarcity_table",
                    "args_id": "watershed_scarcity_table_uri",
                    "type": "file",
                    "label": "Watershed Scarcity Output Table",
                    "defaultValue": "../Hydropower/Output/water_scarcity_watershed.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["ws_id", "precip_mn", "PET_mn", "AET_mn", "wyield_mn", "wyield_sum", "cyield_vl", "consump_vl", "consump_mn", "rsupply_vl", "rsupply_mn"],
                                    "restrictions": [{"field": "ws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+$"}
                                                                  }},
                                                     {"field": "precip_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "PET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "AET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "wyield_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "wyield_sum",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "cyield_vl",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "consump_vl",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "consump_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "rsupply_vl",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "rsupply_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }}]}
                 },
                 {
                    "id" : "subwatershed_scarcity_table",
                    "args_id": "subwatershed_scarcity_table_uri",
                    "type": "file",
                    "label": "Sub-Watershed Scarcity Output Table",
                    "defaultValue": "../Hydropower/Output/water_scarcity_subwatershed.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["ws_id", "subws_id", "precip_mn", "PET_mn", "AET_mn", "wyield_mn", "wyield_sum", "cyield_vl", "consump_vl", "consump_mn", "rsupply_vl", "rsupply_mn"],
                                    "restrictions": [{"field": "ws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+$"}
                                                                  }},
                                                     {"field": "subws_id",
                                                      "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+$"}
                                                                  }},
                                                     {"field": "precip_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "PET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "AET_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "wyield_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "wyield_sum",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "cyield_vl",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "consump_vl",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "consump_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "rsupply_vl",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                     {"field": "rsupply_mn",
                                                      "validateAs": {"type": "number",
                                                                     "allowedValues":{"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }}]}
                 },
                 {
                    "id" : "hydropower_valuation_table",
                    "args_id": "valuation_table_uri",
                    "type": "file",
                    "label": "Hydropower Valuation Table",
                    "defaultValue": "../Hydropower/input/hydropower_valuation_table.csv",
                    "required": true,
                    "validateAs": { "type": "CSV",
                                    "fieldsExist": ["ws_id", "time_span", "discount", "efficiency", "fraction", "cost", "height", "kw_price"],
                                    "restrictions": [{"field": "ws_id",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+$"}
                                                                  }},
                                                    {"field": "time_span",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"^[0-9]+$"}
                                                                  }},                                                    
                                                    {"field": "discount",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},                                                    
                                                    {"field": "efficiency",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},                                                    
                                                    {"field": "fraction",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},                                                    
                                                    {"field": "cost",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},                                                    
                                                    {"field": "height",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }},
                                                    
                                                    {"field": "kw_price",
                                                    "validateAs":{"type": "number",
                                                                  "allowedValues": {"pattern":"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"}
                                                                  }}]}
                 },
                 {        
                    "id" : "results_suffix",
                    "args_id" : "results_suffix",
                    "type": "text",
                    "dataType": "string",
                    "validText": "[a-zA-Z0-9]*",
                    "label": "Results Suffix (optional)",
                    "defaultValue": "",
                    "required": false
                }     
            ]
        }
    ]
}
