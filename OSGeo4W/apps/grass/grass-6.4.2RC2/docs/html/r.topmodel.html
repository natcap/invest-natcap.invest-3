<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>GRASS GIS manual: r.topmodel</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="grassdocs.css" type="text/css">
</head>
<body bgcolor="white">

<img src="grass_logo.png" alt="GRASS logo"><hr align=center size=6 noshade>

<h2>NAME</h2>
<em><b>r.topmodel</b></em>  - Simulates TOPMODEL which is a physically based hydrologic model.
<h2>KEYWORDS</h2>
raster, hydrology
<h2>SYNOPSIS</h2>
<b>r.topmodel</b><br>
<b>r.topmodel help</b><br>
<b>r.topmodel</b> [-<b>i</b>]  [<b>basin</b>=<em>string</em>]   [<b>elevation</b>=<em>string</em>]   [<b>depressionless</b>=<em>string</em>]   [<b>direction</b>=<em>string</em>]   [<b>belevation</b>=<em>string</em>]   [<b>topidx</b>=<em>string</em>]   [<b>nidxclass</b>=<em>integer</em>]  <b>idxstats</b>=<em>string</em> <b>parameters</b>=<em>string</em> <b>input</b>=<em>string</em> <b>output</b>=<em>string</em>  [<b>Qobs</b>=<em>string</em>]   [<b>timestep</b>=<em>integer</em>]   [<b>idxclass</b>=<em>integer</em>]   [--<b>overwrite</b>]  [--<b>verbose</b>]  [--<b>quiet</b>] 

<h3>Flags:</h3>
<DL>
<DT><b>-i</b></DT>
<DD>Input data given for (o/i)</DD>

<DT><b>--overwrite</b></DT>
<DD>Allow output files to overwrite existing files</DD>
<DT><b>--verbose</b></DT>
<DD>Verbose module output</DD>
<DT><b>--quiet</b></DT>
<DD>Quiet module output</DD>
</DL>

<h3>Parameters:</h3>
<DL>
<DT><b>basin</b>=<em>string</em></DT>
<DD>(i)   Basin map created by r.water.outlet (MASK)</DD>

<DT><b>elevation</b>=<em>string</em></DT>
<DD>(i)   Elevation map</DD>

<DT><b>depressionless</b>=<em>string</em></DT>
<DD>(o)   Depressionless elevation map</DD>

<DT><b>direction</b>=<em>string</em></DT>
<DD>(o)   Direction map for depressionless elevation map</DD>

<DT><b>belevation</b>=<em>string</em></DT>
<DD>(o/i) Basin elevation map (MASK applied)</DD>

<DT><b>topidx</b>=<em>string</em></DT>
<DD>(o)   Topographic index ln(a/tanB) map (MASK applied)</DD>

<DT><b>nidxclass</b>=<em>integer</em></DT>
<DD>(i)   Number of topographic index classes</DD>
<DD>Default: <em>30</em></DD>

<DT><b>idxstats</b>=<em>string</em></DT>
<DD>(o/i) Topographic index statistics file</DD>

<DT><b>parameters</b>=<em>string</em></DT>
<DD>(i)   TOPMODEL Parameters file</DD>

<DT><b>input</b>=<em>string</em></DT>
<DD>(i)   Rainfall and potential evapotranspiration data file</DD>

<DT><b>output</b>=<em>string</em></DT>
<DD>(o)   Output file</DD>

<DT><b>Qobs</b>=<em>string</em></DT>
<DD>(i)   OPTIONAL Observed flow file</DD>

<DT><b>timestep</b>=<em>integer</em></DT>
<DD>(i)   OPTIONAL Output for given time step</DD>

<DT><b>idxclass</b>=<em>integer</em></DT>
<DD>(i)   OPTIONAL Output for given topographic index class</DD>

</DL>
<h2>DESCRIPTION</h2>

<b><em>r.topmodel</em></b> simulates TOPMODEL which is a physically based
hydrologic model.
<p>
Note: (i) means input; (o) means output; (o/i) means input or output
<p>
The <b>-i</b> flag indicates that input data are given for (o/i).  Without this
flag, all inputs (i) and intermediate outputs (o/i) should be given.  For
example, [belevation] map will be created from [elevation] and [basin] in every
run.  However, given the same [elevation] and [basin], [belevation] output will
be the same all the time, so r.topmodel can directly take [belevation] as an
input with this flag to save time.
<p>

<h3>Selected Parameters:</h3>

<dl>
<dt><b>depressionless</b> map is created as follows:</dt>
<dd><div class="code"><pre>
r.fill.dir input=elevation elev=depressionless dir=direction type=grass
</pre></div>
This option can be omitted if [elevation] map is already depressionless.
</dd>
<p>

<dt><b>belevation</b> map is created from [elevation] with [basin] mask applied:</dt>
<dd><div class="code"><pre>
r.mapcalc "belevation = if(basin == 0 || isnull(basin), null(), elevation)"
</pre></div></dd>
<p>

<dt><b>topidx</b> map is created as follows:</dt>
<dd><div class="code"><pre>
r.topidx input=elevation output=topidx
</pre></div></dd>
<p>

<dt><b>Qobs</b></dt>
<dd>Compare simulated flows with observed flows and calculate model
efficiency.
</dd>
<p>
</dl>


<h2>REFERENCES</h2>

K. Beven, R. Lamb, P. Quinn, R. Romanowicz, and J. Freer.
TOPMODEL, in V.P. Singh (Ed.). Computer Models of Watershed Hydrology.
Water Resources Publications, 1995.
<p>
S.C. Liaw, Streamflow simulation using a physically based hydrologic
model in humid forested watersheds (Dissertation).
Colorado State University, CO. p163, 1988.


<h2>SEE ALSO</h2>
<em>
<a href="r.fill.dir.html">r.fill.dir</a>,
<a href="r.mapcalc.html">r.mapcalc</a>,
<a href="r.topidx.html">r.topidx</a></em>
<br>
<a href="http://geni.ath.cx/r.topmodel.html">How to run r.topmodel</a>


<h2>AUTHORS</h2>
Main algorithm sources are rewritten in C based on TMOD9502.FOR.
<br>
Thanks to Keith Beven.
<p>
GRASS port by <a href=mailto:grass4u gmail com>Huidae Cho</a><br>
Hydro Laboratory, Kyungpook National University, South Korea

<p>
<i>Last changed: $Date: 2011-11-08 10:42:51 +0100 (Ãºt, 08 XI 2011) $</i>
<HR>
<P><a href="index.html">Main index</a> - <a href="raster.html">raster index</a> - <a href="full_index.html">Full index</a></P>
<P>&copy; 2003-2011 <a href="http://grass.osgeo.org">GRASS Development Team</a></p>
</body>
</html>
